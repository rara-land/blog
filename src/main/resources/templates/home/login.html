<!DOCTYPE html>
<html th:replace="~{layout :: layout(~{::title},~{::style}, ~{::section})}" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>로그인</title>
    <style></style>
</head>
<body>
<section>
<div class="member-wrap">
<h2 class="page-title">로그인</h2>
    <form name="loginForm" th:object="${form}">
    <div class="form-box">
        <div class="box">
            <input type="text" class="form-control" th:field="*{memberId}" placeholder="아이디">
            <input type="password" class="form-control" th:field="*{password}" placeholder="비밀번호">
            <button type="button" id="submit" class="btn btn-secondary submit">로그인</button>
        </div>
    </div>
    </form>
</div>
<!--<form name="loginForm" th:object="${form}">-->
<!--    <div class="form-group  col-md-6">-->
<!--        <label>아이디</label>-->
<!--        <input type="text" class="form-control" th:field="*{memberId}" placeholder="아이디를 입력해주세요.">-->
<!--    </div>-->
<!--    <div class="form-group  col-md-6">-->
<!--        <label>비밀번호</label>-->
<!--        <input type="password" class="form-control" th:field="*{password}" placeholder="비밀번호를 입력해주세요.">-->
<!--    </div>-->
<!--    <div style="margin-top: 2rem">-->
<!--    <button type="button" id="submit" class="btn btn-secondary">로그인</button>-->
<!--    </div>-->
<!--</form>-->

<script src="//ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script th:inline="javascript">
    $("#submit").on("click", function(){

        $.ajax({
            url : "/member/login?redirectUrl="+[[${redirectUrl}]],
            type : "post",
            data : $("form").serialize(),
            dataType : "json"
        }).done(function(rs) {
            alert(rs.msg);

            if (rs.result) {
                window.document.location.href = rs.redirectUrl;
            }
        });

    });
</script>
</section>
</body>
</html>
